var fs = require('fs');
var path = require('path');

exports.getFiles = function(dirpath, callWithFileStats){
  
  var files = fs.readdirSync(dirpath);
  
  for (file of files){
    var fileStats = fs.statSync(path.join(dirpath, file));
    
    //add the name to the stats object
    fileStats.name = file;
    //if its'a  file and not a hidden file
    if (fileStats.isFile() && path.extname(file))
      callWithFileStats(fileStats);
  
  }
}