var fs = require('fs');
var path = require('path');

module.exports = exports = function(curDirPath){
  
  var _scanDir = function(dirpath){
    
    var results = {
        files: [],
        directories: []
    };

    var files = fs.readdirSync(dirpath);

    for (file of files){
      var fileStats = fs.statSync(path.join(dirpath, file));

      //if its'a  file and not a hidden file
      if (fileStats.isFile() && path.extname(file))
        results.files.push(file);

      else if(fileStats.isDirectory())
        results.directories.push(file);
    }

    return results;
    
  };
  
  var walker = {
    scanDir: function(){
      return _scanDir(curDirPath);
    },
    scanChildDir: function(childdir){
      return _scanDir(path.join(curDirPath, childdir));
    },
    scanParentDir: function(){
      return _scanDir(path.dirname(curDirPath));
    },
    scanSiblingDir: function(sibdir){
      return _scanDir(path.join(path.dirname(curDirPath), sibdir));
    }
  }
  
  return walker;
};
